name: Build APK

on: [workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: 🔍 Check what's wrong
      run: |
        echo "=== Checking system ==="
        pwd
        ls -la
        which node
        which npm
        node --version || echo "Node not found"
        npm --version || echo "NPM not found"
        
    - name: 📥 Checkout code
      uses: actions/checkout@v4
      
    - name: 🐳 Use Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 20
        cache: 'npm'
        
    - name: 🔍 Check Node after setup
      run: |
        echo "=== After Node setup ==="
        node --version
        npm --version
        ls -la
        
    - name: 📦 Try install
      run: |
        echo "=== Installing ==="
        npm install || echo "Install failed"
        ls -la node_modules/ || echo "No node_modules"
        
    - name: 🏗️ Try build
      run: |
        echo "=== Building ==="
        npm run build || echo "Build failed"
        ls -la dist/ || echo "No dist folder"
